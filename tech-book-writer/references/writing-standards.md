# 写作规范参考文档

本文档为技术书籍写作系统的内置默认规范。如果项目中存在自定义的 `技术书籍写作规范.md`，将优先使用自定义规范。

## 章节结构模板

每个章节必须包含以下标准结构：

```markdown
# 第X章 章节标题

## 本章导读
- 本章要解决什么问题
- 为什么需要学习这个内容
- 学完本章你将掌握什么

## 核心概念
### X.1 概念一
- **极简定义** (一句话说清楚)
- **本质解释** (用类比或实例说明)
- **应用场景** (什么时候用)

### X.2 概念二
...

## 原理解析
### X.X.1 时序图/流程图
(必须包含可视化图表)

### X.X.2 对比表格
(必须使用表格对比不同方案/技术)

## 实战案例
### X.X.X 典型场景
- **场景描述**
- **完整代码** (可直接运行)
- **代码详解** (逐行注释)
- **运行结果**
- **常见问题**

## 本章小结
- 核心要点回顾(3-5条)
- 知识点关联图

## 章节测试
- 选择题(5题)
- 简答题(3题)
- 编程题(2题)

## 参考答案
(完整答案和解析)
```

## 写作原则

### 0. ⚠️ 严格遵循大纲（最重要原则）

**这是所有写作原则的基础，必须牢记！**

写作前必须确认：
- ✅ 大纲已经过用户审核通过
- ✅ 明确本章在大纲中的定位和范围

写作时必须做到：
- ✅ **标题一致**：章节标题必须与大纲完全一致
- ✅ **内容紧扣**：核心内容必须在大纲规划范围内
- ✅ **边界清晰**：不随意扩展大纲外内容
- ✅ **对照检查**：每写完一段就对照大纲确认

绝对禁止：
- ❌ **随意添加**：在大纲之外添加新章节或大幅扩展内容
- ❌ **偏离主题**：写着写着就跑题了
- ❌ **遗漏内容**：忘记写大纲中规划的重要部分
- ❌ **顺序混乱**：不按照大纲的章节顺序写作

**如果发现需要调整大纲怎么办？**
1. 立即停止写作
2. 向用户说明需要调整大纲的原因
3. 等待用户确认后再继续

### 1. 第一性原理
从最基础的原理出发，不预设读者有任何先验知识。

### 2. 极简表达
用最少的字说清楚问题，避免冗余。

**示例**：
- ❌ "在深度学习领域中，神经网络是一种..."
- ✅ "神经网络就是模拟大脑的计算模型"

### 3. 日常化语言
避免学术术语堆砌，使用读者能理解的语言。

**示例**：
- ❌ "该算法具有较高的时间复杂度"
- ✅ "这个算法比较慢"

### 4. 实战导向
理论必须与实践结合，每个概念都要有对应的代码示例。

## 章节规模控制

- **单章字数**: 5000-8000字
- **阅读时长**: 30-45分钟
- **代码示例**: 2-4个完整案例
- **图表数量**: 3-6个（时序图/流程图/对比表）

## 代码规范

### ⚠️ 可编译运行原则（最重要）

**所有代码示例必须：**
1. **保存为独立文件**：存放到 `assets/chapterXX/code/` 目录
2. **通过验证**：无语法错误，可以直接运行
3. **提供完整依赖**：包含所有必要的导入和安装说明

**验证流程**：
```bash
# 1. 保存代码到文件
# 路径：assets/chapter01/code/example01_linear_regression.py

# 2. 验证代码可运行
python assets/chapter01/code/example01_linear_regression.py

# 3. 确认输出与文章中显示的一致
```

**常见错误检查清单**：
- [ ] 缺少import语句
- [ ] 变量未定义
- [ ] 依赖库未安装
- [ ] 语法错误（缩进、括号等）
- [ ] 代码与输出不一致
- [ ] 文件路径错误

**如果代码无法运行**：
- 立即修复或删除该示例
- 不要使用未经测试的代码

### 完整性原则
- ✅ 可以直接复制运行
- ✅ 包含所有必要的导入
- ✅ 提供测试数据
- ✅ 显示运行结果

### 代码模板

```python
"""
案例名称: XXX
功能说明: 一句话说明这段代码做什么
适用场景: 什么时候用
"""

# 1. 导入必要的库
import numpy as np

# 2. 准备测试数据
data = [1, 2, 3, 4, 5]

# 3. 核心逻辑（每个关键步骤都要注释）
def process_data(input_data):
    """
    函数功能: xxx
    
    参数:
        input_data: 输入数据说明
    
    返回:
        result: 返回结果说明
    """
    # 步骤1: xxx
    step1 = np.array(input_data)
    
    # 步骤2: xxx
    result = step1.mean()
    
    return result

# 4. 运行示例
if __name__ == "__main__":
    result = process_data(data)
    print(f"结果: {result}")

# 预期输出:
# 结果: 3.0
```

### 代码长度控制
- **单个代码块**: ≤ 50行
- **复杂示例**: 分段展示，逐步构建

## 插图规范

### 必须包含的图表类型

#### 1. 时序图（Mermaid）
展示系统交互流程。

```mermaid
sequenceDiagram
    participant 用户
    participant 系统
    participant 数据库
    
    用户->>系统: 发送请求
    系统->>数据库: 查询数据
    数据库-->>系统: 返回结果
    系统-->>用户: 显示结果
```

#### 2. 流程图（Mermaid）
展示算法或业务流程。

```mermaid
flowchart TD
    A[开始] --> B{条件判断}
    B -->|是| C[操作1]
    B -->|否| D[操作2]
    C --> E[结束]
    D --> E
```

#### 3. 对比表格（Markdown）

```markdown
| 技术/方案 | 优点 | 缺点 | 适用场景 |
|----------|------|------|---------|
| 方案A    | xxx  | xxx  | xxx     |
| 方案B    | xxx  | xxx  | xxx     |
```

## 测试题规范

### 题型分配

| 题型 | 数量 | 分值 | 目的 |
|------|------|------|------|
| 选择题 | 5题 | 各2分 | 考察基础概念 |
| 简答题 | 3题 | 各10分 | 考察理解深度 |
| 编程题 | 2题 | 各25分 | 考察实战能力 |

### 选择题示例

```markdown
1. 以下哪个是监督学习的典型应用？
   A. 图像分类 ✓
   B. 聚类分析
   C. 降维处理
   D. 异常检测
   
答案: A
解析: 监督学习需要标注数据，图像分类属于有标签的分类任务。
```

### 简答题示例

```markdown
2. 请简述梯度下降算法的核心思想。

参考答案:
梯度下降通过计算损失函数的梯度，沿着梯度的反方向更新参数，逐步找到最优解。
关键点：
- 计算梯度（导数）
- 反方向更新
- 学习率控制步长
- 迭代直到收敛
```

### 编程题示例

```markdown
3. 使用NumPy实现一个简单的线性回归模型。

参考答案:
[提供完整可运行代码]
```

## 素材组织规范

### 目录结构

所有素材必须按章节组织：

```
assets/
├── chapter01/
│   ├── images/             # 图片资源
│   │   ├── 01_flowchart_xxx.png
│   │   ├── 01_echart_xxx.jpg
│   │   └── README.md        # 图片说明
│   ├── code/               # 代码文件
│   │   ├── example01_xxx.py
│   │   ├── example02_xxx.py
│   │   └── README.md        # 代码说明
│   ├── html/               # HTML/图表
│   │   └── chart01_xxx.html
│   └── data/               # 数据文件
│       └── config.json
├── chapter02/
│   └── ...
```

### 命名规范

**图片文件**：
```
{章节号}_{类型}_{描述}.{扩展名}

示例：
- 01_flowchart_ml_workflow.png
- 01_echart_performance.jpg
- 01_table_comparison.png
```

**代码文件**：
```
example{序号}_{描述}.{语言扩展名}

示例：
- example01_linear_regression.py
- example02_data_processing.py
```

**HTML/图表**：
```
chart{序号}_{描述}.html

示例：
- chart01_performance.html
```

### 代码文件要求

每个代码文件必须包含：
```python
"""
案例名称: XXX
功能说明: 一句话说明
适用场景: XXX
依赖库: numpy, pandas, matplotlib
"""

# 完整的import语句
import numpy as np
import pandas as pd
from matplotlib import pyplot as plt

# 完整的代码逻辑
# ...

# 运行示例
if __name__ == "__main__":
    # 测试代码
    pass

# 预期输出
# (显示实际运行结果)
```

### README文件

每个素材子目录应包含README.md：

**images/README.md**：
```markdown
# 第1章图片素材

- 01_flowchart_ml_workflow.png: 机器学习工作流程图
- 01_echart_performance.jpg: 各算法性能对比图
```

**code/README.md**：
```markdown
# 第1章代码示例

## 环境要求
- Python 3.11+
- numpy >= 1.26
- pandas >= 2.2

## 文件列表
- example01_linear_regression.py: 线性回归示例
- example02_data_processing.py: 数据预处理示例

## 运行方式
```bash
python example01_linear_regression.py
```
```

### 文章中的引用

```markdown
# 图片引用（使用相对路径）
![机器学习流程](../assets/chapter01/images/01_flowchart_ml_workflow.png)

# 代码引用（提供文件链接）
完整代码见：[example01.py](../assets/chapter01/code/example01_linear_regression.py)

# 或在代码块后附注
<details>
<summary>查看完整代码</summary>

```python
# 文件：assets/chapter01/code/example01.py
...完整代码...
```
</details>
```

## 质量检查清单

### ⚠️ 大纲一致性检查（最重要！）

每章完成后，必须首先检查大纲一致性：

- [ ] 章节标题是否与大纲完全一致？
- [ ] 核心内容是否紧扣大纲规划的主题？
- [ ] 是否包含了大纲之外随意添加的内容？
- [ ] 是否遗漏了大纲中规划的核心内容？
- [ ] 章节顺序是否与大纲保持一致？

**如果以上任何一项为"否"，立即修改章节内容！**

### 内容质量自检

- [ ] 核心概念是否用一句话说清楚了？
- [ ] 是否包含至少2个时序图/流程图？
- [ ] 是否有对比表格展示不同方案？
- [ ] 代码示例是否可以直接运行？
- [ ] 是否添加了足够的代码注释？
- [ ] 是否避免了过度深入的理论？
- [ ] 测试题是否覆盖本章核心知识点？
- [ ] 语言风格是否简洁易懂？
- [ ] 单章字数是否在5000-8000之间？

### ⚠️ 代码质量检查（必须验证）

每段代码示例必须：

- [ ] **已保存为独立文件**到 `assets/chapterXX/code/` 目录
- [ ] **通过编译/解释器验证**，无语法错误
- [ ] **可以直接运行**，产生预期输出
- [ ] **包含完整的依赖**（所有import语句）
- [ ] **有详细注释**，关键步骤都有说明
- [ ] **输出一致**：代码实际运行结果与文章中显示的一致

**验证步骤**：
```bash
# 1. 保存代码文件
# 路径：assets/chapter01/code/example01.py

# 2. 验证可运行
python assets/chapter01/code/example01.py

# 3. 确认输出正确
```

### 素材组织检查

- [ ] **按章节组织**：所有素材在 `assets/chapterXX/` 对应目录
- [ ] **分类存放**：图片、代码、HTML、数据分别在对应子目录
- [ ] **命名规范**：文件名符合命名规范（章节号_类型_描述）
- [ ] **README完整**：每个素材目录有说明文档
- [ ] **引用正确**：文章中的引用路径可访问到实际文件
- [ ] **无孤立文件**：所有素材文件都被引用，无遗漏

## 技术栈时效性

使用2025年主流技术栈。

### Python技术栈
```python
Python: 3.11+
NumPy: 1.26+
Pandas: 2.2+
Matplotlib: 3.8+
PyTorch: 2.2+
TensorFlow: 2.15+
```

### 前端技术栈
```
Node.js: 20.x LTS
React: 18.x
Vue: 3.x
TypeScript: 5.x
```

### 后端技术栈
```
Go: 1.22+
Gin: 1.9+
GORM: 2.x
```

## 阮一峰写作风格

### 核心特征

1. **极简表达**: 用最少的字说清楚问题
2. **日常化语言**: 避免学术术语堆砌
3. **类比思维**: 用生活常识解释技术
4. **分点叙述**: 多用列表，少用长段落
5. **留白设计**: 适当的空行和分隔

### 具体示例

**传统写法**：
```
在深度学习领域，卷积神经网络（Convolutional Neural Network, CNN）
是一种专门用于处理具有网格结构数据的深度学习模型，其核心思想是
通过卷积层提取特征...
```

**阮一峰风格**：
```
CNN 就是处理图片的神经网络。

为什么叫"卷积"？因为它像扫描仪一样，用一个小窗口在图片上滑动，
提取特征。

类比：就像你看一张照片，先注意边缘、颜色、形状，最后才认出是什么。
```

## 禁止事项

- ❌ 长篇大论的理论推导
- ❌ 晦涩的数学公式（除非必要）
- ❌ 没有代码的纯理论讲解
- ❌ 过时的技术栈（2024年以前）
- ❌ 没有注释的代码示例
- ❌ 超过100行的代码块

---

最后更新: 2026-02-06
